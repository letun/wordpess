<?php
$html =<<<HTML
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="color-scheme" content="light dark">
        <meta name="supported-color-schemes" content="light dark">
        <title> » My first email</title>
        <link rel="stylesheet" type="text/css" href="http://wordpress.local/wp-content/themes/lettera/lettera.css">
        <!-- <style> -->
    </head>
    <body>
        <span class="preheader"></span>
        <table class="body">
            <tbody><tr>
                <td class="center body-inner" align="center" valign="top">
                    <center>
	                    <table align="center" class="wrapper header float-center">
		                    <tbody>
		                    <tr>
			                    <td class="wrapper-inner">
				                    <table width="100%" cellpadding="0" cellspacing="0">
					                    <tbody>
					                    <tr>
						                    <td align="center">
							                    <center>
								                    <a href="https://www.letun.dev/" align="center" class="float-center">
									                    <img src="/wp-content/themes/lettera/images/header/logo/lettera.png" width="108" height="24" alt="Lettera" class="logo light-img">

									                    <!--[if !mso]><! --><div class="dark-img" align="center">
										                    <img src="/wp-content/themes/lettera/images/header/logo/lettera-white.png" width="108" height="24" alt="Lettera" class="logo">
									                    </div><!--<![endif]-->
								                    </a>
							                    </center>
						                    </td>
					                    </tr>
					                    </tbody>
				                    </table>
			                    </td>
		                    </tr>
		                    </tbody>
	                    </table>
<table align="center" class="container float-center" cellpadding="0" cellspacing="0"><tbody><tr><td class="container-inner">
<table align="center" class="row" cellpadding="0" cellspacing="0"><tbody><tr><td class="row-inner wp-block-lettera-block-heading"><table align="center" class="column" cellpadding="0" cellspacing="0"><tbody><tr><td class="column-inner">


<h1 class="wp-block-lettera-header text-center">Header</h1>


</td></tr></tbody></table></td></tr></tbody></table>



<table align="center" class="row" cellpadding="0" cellspacing="0"><tbody><tr><td class="row-inner wp-block-lettera-block-cards"><table align="center" class="columns" cellpadding="0" cellspacing="0"><tbody><tr><td class="columns-inner">
<table align="center" class="column" cellpadding="0" cellspacing="0"><tbody><tr><td class="column-inner wp-block-lettera-card"><a href="https://www.letun.dev/lettera"><img src="/wp-content/themes/lettera/images/components/hero.png" alt="Promo" class="card__image"><p class="card__text">Card N</p><p class="card__link"><span>Learn more</span>&nbsp;→</p></a></td></tr></tbody></table>



<table align="center" class="column" cellpadding="0" cellspacing="0"><tbody><tr><td class="column-inner wp-block-lettera-card"><a href="https://www.letun.dev/lettera"><img src="/wp-content/themes/lettera/images/components/hero.png" alt="Promo" class="card__image"><p class="card__text">Card N</p><p class="card__link"><span>Learn more</span>&nbsp;→</p></a></td></tr></tbody></table>
</td></tr></tbody></table></td></tr></tbody></table>
</td></tr></tbody></table>
						<table align="center" class="container float-center" cellpadding="0" cellspacing="0">
							<tbody>
							<tr>
								<td class="container-inner">
									<table class="row" cellpadding="0" cellspacing="0">
										<tbody>
										<tr>
											<td class="row-inner">
												<div class="columns">
													<!--[if (gte mso 9)|(IE)]><table width="100%"><tr><td width="50%" valign="top" ><![endif]-->
													<div class="column">
														<table class="column" cellpadding="0" cellspacing="0">
															<tbody>
															<tr>
																<td class="column-inner">
																	<p><a href="#" class="first">Sign in</a></p>
																	<p><a href="#">Website</a></p>
																	<p><a href="{{unsubscribe_url}}">Unsubscribe</a></p>
																</td>
															</tr>
															</tbody>
														</table>
													</div>
													<!--[if (gte mso 9)|(IE)]></td><td width="50%" valign="top" ><![endif]-->
													<div class="column">
														<table class="column" cellpadding="0" cellspacing="0">
															<tbody>
															<tr>
																<td class="column-inner">
																	<p class="text-gray">Download our app for <a href="#">Iphone</a> and <a href="#">Android</a></p>
																	<table width="240" cellpadding="0" cellspacing="0" class="footer-social-links">
																		<tbody>
																		<tr>
																			<td align="left" width="40">
																				<a href="#"><img src="/wp-content/themes/lettera/images/footer/social/fb.png" width="32" height="32" alt="Facebook"></a>
																			</td>
																			<td align="left" width="40">
																				<a href="#"><img src="/wp-content/themes/lettera/images/footer/social/in.png" width="32" height="32" alt="Instagram"></a>
																			</td>
																			<td align="left" width="40">
																				<a href="#"><img src="/wp-content/themes/lettera/images/footer/social/sc.png" width="32" height="32" alt="Podcast"></a>
																			</td>
																			<td align="left" width="40">
																				<a href="#"><img src="/wp-content/themes/lettera/images/footer/social/tw.png" width="32" height="32" alt="Twitter"></a>
																			</td>
																			<td align="left" width="40">
																				<a href="#"><img src="/wp-content/themes/lettera/images/footer/social/yt.png" width="32" height="32" alt="Youtube"></a>
																			</td>
																			<td align="left" width="40">
																				<a href="#"><img src="/wp-content/themes/lettera/images/footer/social/ln.png" width="32" height="32" alt="LinkedIn"></a>
																			</td>
																		</tr>
																		</tbody>
																	</table>
																</td>
															</tr>
															</tbody>
														</table>
													</div>
													<!--[if (gte mso 9)|(IE)]></td></tr></table><![endif]-->
												</div>
												<table class="spacer">
													<tbody>
													<tr>
														<td height="16" style="font-size:16px;line-height:16px;">&nbsp;</td>
													</tr>
													</tbody>
												</table>
											</td>
										</tr>
										</tbody>
									</table>
								</td>
							</tr>
							</tbody>
						</table>
					</center>
				</td>
			</tr>
		</tbody></table>
		<!-- prevent Gmail on iOS font size manipulation -->
		<div style="display:none; white-space:nowrap; font:15px courier; line-height:0;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div>
</body></html>
HTML;

$doc = new DOMDocument();
$doc->encoding = 'utf-8';
$doc->loadHTML((utf8_decode($html)));


$finder = new DomXPath($doc);
$classname="columns-inner";
$nodes = $finder->query("//*[contains(@class, '$classname')]");

if (!is_null($nodes) && $nodes->length > 0) {
	for ($i = 0; $i < $nodes->length; $i++) {
		$columns = $nodes->item($i)->childNodes;
		echo $columns->length;
		if ($nodes->item($i)->hasChildNodes() && $nodes->item($i)->childNodes()->length > 1) {
			echo $nodes->item($i)->hasChildNodes()->length;
		}
	}
	//$nodes[0]->removeChild($nodes);
	//return $nodes->length . '-' . $doc->saveHTML();
}


echo $doc->saveHTML($doc->documentElement);